{"version":3,"file":"static/js/327.ddc512c4.chunk.js","mappings":"8LA0CA,UAlCoB,SAACA,GAEb,IAAOC,GAAMC,EAAAA,EAAAA,MAAND,GACPE,GAAmDC,EAAAA,EAAAA,UAC/C,CAAC,QAAS,CAACH,GAAIA,IAAMI,EAAAA,IADlBC,EAAIH,EAAJG,KAAMC,EAAKJ,EAALI,MAAOC,EAASL,EAATK,UAAWC,EAAON,EAAPM,QAASC,EAAOP,EAAPO,QAUxC,IANAC,EAAAA,EAAAA,YAAU,WACDL,GAASA,EAAKM,SACfF,GAER,GAAG,CAACJ,EAAMI,IAENF,EACA,OAAOK,EAAAA,EAAAA,KAACC,EAAAA,EAAO,IAGnB,GAAIL,EACA,OAAOI,EAAAA,EAAAA,KAAA,MAAAE,SAAKR,EAAMS,UAEtB,IAAKV,IAASA,EAAKM,QACf,OAAOC,EAAAA,EAAAA,KAACC,EAAAA,EAAO,IAEnB,IAAMG,EAASX,EAAKM,QAEpB,OADAM,QAAQC,IAAIF,IAERJ,EAAAA,EAAAA,KAACO,EAAAA,EAAY,CACTC,MAAM,iBACNJ,OAAQA,EACRK,OAAQ,SAACC,GAAK,OAAKV,EAAAA,EAAAA,KAACW,EAAAA,EAAkB,CAACD,MAAOA,GAAQ,GAGlE,C","sources":["pages/similarMoviesPage.js"],"sourcesContent":["import PageTemplate from '../components/templateMovieListPage'\r\nimport {getSimilar} from \"../api/tmdb-api\";\r\nimport Spinner from '../components/spinner';\r\nimport {useQuery} from 'react-query';\r\nimport AddToFavoritesIcon from '../components/cardIcons/addToFavorites'\r\nimport {useParams} from \"react-router-dom\";\r\nimport React, {useEffect} from \"react\";\r\n\r\nconst SimilarPage = (props) => {\r\n        // const [movies, setMovies] = useState([]);\r\n        const {id} = useParams();\r\n        const {data, error, isLoading, isError, refetch} = useQuery(\r\n            [\"movie\", {id: id}], getSimilar\r\n        );\r\n\r\n        useEffect(() => {\r\n            if (!data || !data.results) {\r\n                refetch();\r\n            }\r\n        }, [data, refetch]); // 依赖于 data 和 refetch\r\n\r\n        if (isLoading) {\r\n            return <Spinner/>\r\n        }\r\n\r\n        if (isError) {\r\n            return <h1>{error.message}</h1>\r\n        }\r\n        if (!data || !data.results) {\r\n            return <Spinner />; // 或者返回某种“无数据”或“加载中”的提示\r\n        }\r\n        const movies = data.results;\r\n        console.log(movies);\r\n        return (\r\n            <PageTemplate\r\n                title='Similar Movies'\r\n                movies={movies}\r\n                action={(movie) => <AddToFavoritesIcon movie={movie}/>}\r\n            />\r\n        );\r\n    }\r\n;\r\nexport default SimilarPage;"],"names":["props","id","useParams","_useQuery","useQuery","getSimilar","data","error","isLoading","isError","refetch","useEffect","results","_jsx","Spinner","children","message","movies","console","log","PageTemplate","title","action","movie","AddToFavoritesIcon"],"sourceRoot":""}